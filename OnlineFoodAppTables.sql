CREATE TABLE EMPLOYEE 
(
  EMP_ID NUMBER NOT NULL 
, NAME VARCHAR2(20) NOT NULL 
, SURNAME VARCHAR2(20) NOT NULL 
, USERNAME VARCHAR2(50) NOT NULL
, PASSWORD VARCHAR2(150) NOT NULL
, CONSTRAINT EMPLOYEE_PK PRIMARY KEY(EMP_ID) ENABLE 
);

insert into employee(emp_id,name ,surname, username, password) values (1,'MESUT','CAN', 'mesutcan', '$2a$10$b9v7n4PiLeOucWYI6ypD4.dgRud6SOOeYZqDCp5D1M09nJdNaF0Jq');
insert into employee(emp_id,name ,surname, username, password) values (2,'USER','COOK', 'cook', '$2a$10$b9v7n4PiLeOucWYI6ypD4.dgRud6SOOeYZqDCp5D1M09nJdNaF0Jq');
insert into employee(emp_id,name ,surname, username, password) values (3,'USER','COURIER', 'courier', '$2a$10$b9v7n4PiLeOucWYI6ypD4.dgRud6SOOeYZqDCp5D1M09nJdNaF0Jq');

CREATE TABLE MEAL
(
  CODE VARCHAR2(20) NOT NULL 
, EMP_ID NUMBER NOT NULL 
, NAME VARCHAR2(20) 
, PRICE NUMBER 
, PHOTO VARCHAR2(200) 
, DETAIL VARCHAR2(100)
, CAMPAIGN NUMBER(1,0)
, CREATION_DATE TIMESTAMP (6) NOT NULL
, CONSTRAINT MEAL_PK PRIMARY KEY(CODE) ENABLE
, CONSTRAINT MEAL_FK2 FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE (EMP_ID) ENABLE 
, CONSTRAINT MEAL_CHK1 CHECK(CAMPAIGN IN (1,0)) ENABLE
);

insert into meal(code,emp_id,name,price,photo,detail,creation_date, campaign) values ('CRB1',1,'Çorba',6,'https://i4.hurimg.com/i/hurriyet/75/1500x844/5abe1a86b699de1d2c647f63.jpg','Mercimek Corbasi',sysdate, 0);
insert into meal(code,emp_id,name,price,photo,detail,creation_date, campaign) values ('MNT1',1,'Manti',12,'https://i4.hurimg.com/i/hurriyet/75/750x422/55eac844f018fbb8f8966221.jpg	','Kayseri Mantisi',sysdate, 1);
insert into meal(code,emp_id,name,price,photo,detail,creation_date, campaign) values ('PD1',1,'Pide',19,'https://i4.hurimg.com/i/hurriyet/75/1500x844/5afad85ec9de3d1154e581c1.jpg	','Karisik Pide',sysdate, 1);

CREATE TABLE CUSTOMER
(
    CUSTOMER_ID NUMBER NOT NULL,
    NAME VARCHAR(20) NOT NULL,
    SURNAME VARCHAR(20) NOT NULL,
    USERNAME VARCHAR(50) NOT NULL,
    PASSWORD VARCHAR(150) NOT NULL,
    ADDRESS VARCHAR2(2000) NOT NULL,
    CONSTRAINT CUSTOMER_PK PRIMARY KEY (CUSTOMER_ID) ENABLE
);

INSERT INTO customer (customer_id, name, surname, username, password, address) VALUES (1, 'artem', 'eu', 'artemeu', '$2a$10$DazmsI9.AQgX9DvhCqM/j.21l5Dsfk1Gk9mrLmnYRrxCa88DLmTIW', 'Ankara Teknoloji Geli?tirme Bölgesi, G Blok, Üniversiteler Mahallesi Beytepe Lodumlu Köy Yolu Caddesi No:91, 06800 Bilkent Çankaya / ANKARA??');

CREATE TABLE ROLE
(
    ROLE_ID NUMBER NOT NULL,
    NAME VARCHAR2(50) NOT NULL,
    EXPLANATION VARCHAR2(200) NOT NULL,
    CONSTRAINT ROLE_PK PRIMARY KEY(ROLE_ID) ENABLE
);

INSERT INTO ROLE(ROLE_ID, NAME, EXPLANATION) VALUES (1, 'Admin', 'Owner of the reataurant');
INSERT INTO ROLE(ROLE_ID, NAME, EXPLANATION) VALUES (2, 'Cook', 'Cook of the reataurant');
INSERT INTO ROLE(ROLE_ID, NAME, EXPLANATION) VALUES (3, 'Courier', 'Courier of the reataurant');

create table employee_role
(
    EMP_ID NUMBER NOT NULL,
    ROLE_ID NUMBER NOT NULL,
    ACTIVE NUMBER(1,0),
    SINCE TIMESTAMP(6) NOT NULL,
    CONSTRAINT EMPLOYEE_ROLE_FK1 FOREIGN KEY(EMP_ID) REFERENCES EMPLOYEE(EMP_ID) ENABLE,
    CONSTRAINT EMPLOYEE_ROLE_FK2 FOREIGN KEY(ROLE_ID) REFERENCES ROLE(ROLE_ID) ENABLE,
    CONSTRAINT EMPLOYEE_ROLE_CHK1 CHECK(ACTIVE IN (1,0)) ENABLE
);

INSERT INTO EMPLOYEE_ROLE(EMP_ID, ROLE_ID, ACTIVE, SINCE) VALUES (1,1,1,SYSDATE);
INSERT INTO EMPLOYEE_ROLE(EMP_ID, ROLE_ID, ACTIVE, SINCE) VALUES (2,2,1,SYSDATE);
INSERT INTO EMPLOYEE_ROLE(EMP_ID, ROLE_ID, ACTIVE, SINCE) VALUES (3,3,1,SYSDATE);

CREATE TABLE CART
(   
    CUSTOMER_ID NUMBER NOT NULL,
    CODE VARCHAR2(20) NOT NULL,
    IS_ACTIVE NUMBER (1,0),
    CONSTRAINT CART_FK1 FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID) ENABLE,
    CONSTRAINT CART_FK2 FOREIGN KEY(CODE) REFERENCES MEAL(CODE) ENABLE,
    CONSTRAINT CART_CHK1 CHECK(IS_ACTIVE IN (1,0)) ENABLE
);

CREATE TABLE ORDERS
(
    ORDER_ID NUMBER NOT NULL,
    PRICE NUMBER NOT NULL,
    PLACEMENT_DATE TIMESTAMP (6) NOT NULL,
    STATUS NUMBER (1, 0),
    CUSTOMER_ID NUMBER NOT NULL,
    CONSTRAINT ORDERS_PK PRIMARY KEY (ORDER_ID) ENABLE,
    CONSTRAINT ORDERS_CHK1 CHECK(STATUS IN (1, 0)) ENABLE,
    CONSTRAINT ORDERS_FK1 FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID) ENABLE
);

CREATE TABLE ORDER_DETAILS
(
    ORDER_ID NUMBER NOT NULL,
    CODE VARCHAR2(20) NOT NULL,
    UNIT_PRICE NUMBER NOT NULL,
    CONSTRAINT ORDER_DETAILS_FK1 FOREIGN KEY (ORDER_ID) REFERENCES ORDERS(ORDER_ID) ENABLE,
    CONSTRAINT ORDER_DETAILS_FK2 FOREIGN KEY (CODE) REFERENCES MEAL(CODE) ENABLE
);

INSERT INTO ORDERS (ORDER_ID, PRICE, PLACEMENT_DATE, STATUS, CUSTOMER_ID) VALUES (1, 37, SYSDATE, 0, 1);
INSERT INTO ORDER_DETAILS (ORDER_ID, CODE, UNIT_PRICE) VALUES (1, 'MNT1', 12);
INSERT INTO ORDER_DETAILS (ORDER_ID, CODE, UNIT_PRICE) VALUES (1, 'PD1', 19);
INSERT INTO ORDER_DETAILS (ORDER_ID, CODE, UNIT_PRICE) VALUES (1, 'CRB1', 6);

INSERT INTO ORDERS (ORDER_ID, PRICE, PLACEMENT_DATE, STATUS, CUSTOMER_ID) VALUES (2, 31, SYSDATE, 1, 1);
INSERT INTO ORDER_DETAILS (ORDER_ID, CODE, UNIT_PRICE) VALUES (2, 'MNT1', 12);
INSERT INTO ORDER_DETAILS (ORDER_ID, CODE, UNIT_PRICE) VALUES (2, 'PD1', 19);

INSERT INTO ORDERS (ORDER_ID, PRICE, PLACEMENT_DATE, STATUS, CUSTOMER_ID) VALUES (3, 18, SYSDATE, NULL, 1);
INSERT INTO ORDER_DETAILS (ORDER_ID, CODE, UNIT_PRICE) VALUES (3, 'CRB1', 6);
INSERT INTO ORDER_DETAILS (ORDER_ID, CODE, UNIT_PRICE) VALUES (3, 'MNT1', 12);